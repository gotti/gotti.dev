<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/f7694684bafa1b63.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f7694684bafa1b63.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-950829b7c220163d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b73741786cd71641.js" defer=""></script><script src="/_next/static/chunks/441-cface77118a36673.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Barticle%5D-570933cadfce4296.js" defer=""></script><script src="/_next/static/yNUj7Y4cyPvjN1GaMlLf8/_buildManifest.js" defer=""></script><script src="/_next/static/yNUj7Y4cyPvjN1GaMlLf8/_ssgManifest.js" defer=""></script><script src="/_next/static/yNUj7Y4cyPvjN1GaMlLf8/_middlewareManifest.js" defer=""></script></head><body class="Body"><div class="Menu"><ul><li><a href="/">Home</a></li><li><a href="/post/">Post</a></li></ul></div><div class="Home"><div id="__next" data-reactroot=""><div class="postBody"><div><h1 id="motivation">Motivation</h1>
<p>discordとかやる端末と開発機/ゲーム機が違うとき、画面共有できませんよね？ネットワーク経由で転送して開発機の動画を見せましょう</p>
<h1 id="前提条件">前提条件</h1>
<ul>
<li>両方の端末にffmpegがインストールされていること</li>
<li>デスクトップキャプチャ側はx11が動いていること</li>
<li>画面を表示する方で30000ポートを開放できること</li>
</ul>
<h1 id="こまんど">こまんど</h1>
<p>デスクトップキャプチャ&amp;送信元
3840_2160はキャプチャ側の解像度です。環境によっては1920_1080とかでもいいです。
scale=1920:-1で横1920、縦は比率維持して自動調整しFHDに縮小してます。
${target_host}は画面を表示する方のIPアドレスを指定してください。</p>
<pre><code class="language-bash">ffmpeg -f x11grab -video_size 3840_2160 -i :0.0+0,0 -vf &quot;scale=1920:-1&quot; -framerate 30 -preset superfast -tune zerolatency -f mpegts &#39;srt://${target_host}:30000&#39;
</code></pre>
<p>画面を表示する方</p>
<pre><code class="language-bash">ffplay -analyzeduration 1 -fflags -nobuffer -probesize 32 -i &quot;srt://0.0.0.0:30000?mode=listener&quot;
</code></pre>
<p>おわり</p>
<h1 id="参考">参考</h1>
<p><a href="https://stackoverflow.com/questions/42953616/very-low-latency-streaminig-with-ffmpeg-using-a-webcam">https://stackoverflow.com/questions/42953616/very-low-latency-streaminig-with-ffmpeg-using-a-webcam</a></p>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":"\n# Motivation\n\ndiscordとかやる端末と開発機/ゲーム機が違うとき、画面共有できませんよね？ネットワーク経由で転送して開発機の動画を見せましょう\n\n# 前提条件\n\n- 両方の端末にffmpegがインストールされていること\n- デスクトップキャプチャ側はx11が動いていること\n- 画面を表示する方で30000ポートを開放できること\n\n# こまんど\n\nデスクトップキャプチャ\u0026送信元\n3840_2160はキャプチャ側の解像度です。環境によっては1920_1080とかでもいいです。\nscale=1920:-1で横1920、縦は比率維持して自動調整しFHDに縮小してます。\n${target_host}は画面を表示する方のIPアドレスを指定してください。\n\n```bash\nffmpeg -f x11grab -video_size 3840_2160 -i :0.0+0,0 -vf \"scale=1920:-1\" -framerate 30 -preset superfast -tune zerolatency -f mpegts 'srt://${target_host}:30000'\n```\n\n画面を表示する方\n```bash\nffplay -analyzeduration 1 -fflags -nobuffer -probesize 32 -i \"srt://0.0.0.0:30000?mode=listener\"\n```\n\nおわり\n\n# 参考\n\nhttps://stackoverflow.com/questions/42953616/very-low-latency-streaminig-with-ffmpeg-using-a-webcam\n"},"__N_SSG":true},"page":"/post/[article]","query":{"article":"ffmpeg_realtime_video_transfer"},"buildId":"yNUj7Y4cyPvjN1GaMlLf8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>